(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},105:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(67),i=c.n(s),r=(c(87),c(9)),o=(c(88),c(128)),j=c(74),d=c.n(j),l=c(75),h=c.n(l),b=c(76),u=c.n(b),m=c(130),O=c(77),p=c.n(O),x=(c(89),c(37)),f=x.a.initializeApp({apiKey:"AIzaSyDmB_PJFQRDGtdT9oV4ecXVHbqnanp9UbQ",authDomain:"whatsapp-clone-4f188.firebaseapp.com",projectId:"whatsapp-clone-4f188",storageBucket:"whatsapp-clone-4f188.appspot.com",messagingSenderId:"618269431538",appId:"1:618269431538:web:1dc84f6df32cf15a07e26b",measurementId:"G-LWTVD6M9W0"}).firestore(),v=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,_=f,N=c(39),S=c(3);var w=function(e){var t,c=e.id,n=e.name,s=e.addNewChat,i=Object(a.useState)(""),j=Object(r.a)(i,2),d=j[0],l=j[1],h=Object(a.useState)([]),b=Object(r.a)(h,2),u=b[0],m=b[1];return Object(a.useEffect)((function(){c&&_.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),s?Object(S.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&_.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(S.jsx)("h2",{children:"Add new Chat"})}):Object(S.jsx)(N.b,{to:"/rooms/".concat(c),children:Object(S.jsxs)("div",{className:"sidebarChat",children:[Object(S.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(S.jsxs)("div",{className:"sidebarChat__info",children:[Object(S.jsx)("h2",{children:n}),Object(S.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})},y=(c(100),Object(a.createContext)()),C=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(S.jsx)(y.Provider,{value:Object(a.useReducer)(t,c),children:n})},I=function(){return Object(a.useContext)(y)};var W=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=I(),i=Object(r.a)(s,2),j=i[0].user;return i[1],Object(a.useEffect)((function(){var e=_.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(S.jsxs)("div",{className:"sidebar",children:[Object(S.jsxs)("div",{className:"sidebar__header",children:[Object(S.jsx)(o.a,{src:null===j||void 0===j?void 0:j.photoURL}),Object(S.jsxs)("div",{className:"sidebar__headerRight",children:[Object(S.jsx)(m.a,{children:Object(S.jsx)(d.a,{})}),Object(S.jsx)(m.a,{children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(m.a,{children:Object(S.jsx)(u.a,{})})]})]}),Object(S.jsx)("div",{className:"sidebar__search",children:Object(S.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(S.jsx)(p.a,{}),Object(S.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(S.jsxs)("div",{className:"sidebar__chats",children:[Object(S.jsx)(w,{addNewChat:!0}),c.map((function(e){return Object(S.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},k=c(121),E=c(122),D=c(123),T=c(124),A=c(125),R=(c(101),c(17));var B=function(){var e,t,c=Object(a.useState)(""),n=Object(r.a)(c,2),s=n[0],i=n[1],j=Object(a.useState)(""),d=Object(r.a)(j,2),l=d[0],h=d[1],b=Object(R.f)().roomId,u=Object(a.useState)(""),O=Object(r.a)(u,2),p=O[0],f=O[1],v=Object(a.useState)([]),g=Object(r.a)(v,2),N=g[0],w=g[1],y=I(),C=Object(r.a)(y,1)[0].user;Object(a.useEffect)((function(){b&&(_.collection("rooms").doc(b).onSnapshot((function(e){return f(e.data().name)})),_.collection("rooms").doc(b).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return w(e.docs.map((function(e){return e.data()})))})))}),[b]),Object(a.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[b]);var W=function(e){e.preventDefault(),console.log("You type >>>",l),_.collection("rooms").doc(b).collection("messages").add({name:C.displayName,message:l,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),h("")};return Object(S.jsxs)("div",{className:"chat",children:[Object(S.jsxs)("div",{className:"chat__header",children:[Object(S.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(s,".svg")}),Object(S.jsxs)("div",{className:"chat__headerInfo",children:[Object(S.jsx)("h3",{children:p}),Object(S.jsxs)("p",{children:["last seen"," ",new Date(null===(e=N[N.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(S.jsxs)("div",{className:"chat__headerRight",children:[Object(S.jsx)(m.a,{children:Object(S.jsx)(k.a,{})}),Object(S.jsx)(m.a,{children:Object(S.jsx)(E.a,{})}),Object(S.jsx)(m.a,{children:Object(S.jsx)(D.a,{})})]})]}),Object(S.jsx)("div",{className:"chat__body",children:N.map((function(e){var t;return Object(S.jsxs)("p",{className:"chat__message ".concat(e.name===C.displayName&&"chat__reciever"),children:[Object(S.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(S.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(S.jsxs)("div",{className:"chat__footer",children:[Object(S.jsx)(T.a,{}),Object(S.jsxs)("form",{onSubmit:W,children:[Object(S.jsx)("input",{value:l,onChange:function(e){return h(e.target.value)},placeholder:"Type a message",type:"text"}),Object(S.jsx)("button",{onClick:W,type:"submit",children:"Send a message"})]}),Object(S.jsx)(A.a,{})]})]})},M=c(78),U=c(129);c(102);var P=function(){var e=I(),t=Object(r.a)(e,2);Object(M.a)(t[0]);var c=t[1];return Object(S.jsx)("div",{className:"login",children:Object(S.jsxs)("div",{className:"login__container",children:[Object(S.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/765px-WhatsApp.svg.png",alt:""}),Object(S.jsx)("div",{className:"login__text",children:Object(S.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(S.jsx)(U.a,{type:"submit",onClick:function(){v.signInWithPopup(g).then((function(e){c({type:"SET_USER",user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})]})})};c(103);var G=function(){return Object(S.jsx)("div",{className:"homescreen",children:Object(S.jsx)("div",{className:"homescreen__container",children:Object(S.jsxs)("div",{className:"homescreen__text",children:[Object(S.jsx)("img",{src:"https://web.whatsapp.com/img/intro-connection-hq-light_9466a20e6d2921a21ac7ab82419be157.jpg",alt:""}),Object(S.jsx)("h2",{children:"Keep your internet connected"}),Object(S.jsx)("p",{children:"Whatsapp Web Clone connects your google account to sync the account info"})]})})})};var V=function(){var e=I(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(S.jsx)("div",{className:"app",children:c?Object(S.jsx)("div",{className:"app__body",children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(W,{}),Object(S.jsxs)(R.c,{children:[Object(S.jsx)(R.a,{path:"/rooms/:roomId",children:Object(S.jsx)(B,{})}),Object(S.jsx)(R.a,{path:"/",children:Object(S.jsx)(G,{})})]})]})}):Object(S.jsx)(P,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=c(63),q=function(e,t){return console.log(t),"SET_USER"===t.type?Object(J.a)(Object(J.a)({},e),{},{user:t.user}):e};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(C,{initialState:{user:null},reducer:q,children:Object(S.jsx)(V,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){}},[[105,1,2]]]);
//# sourceMappingURL=main.6cef9829.chunk.js.map